# Class SFINAE

## 정의
- SFINAE를 사용하여 클래스 템플릿을 특수화할 수 있다.
- 기본 템플릿 정의에 대해 SFINAE를 사용하여 조건에 따라 템플릿을 활성화하거나 비활성화한다.

```cpp
#include <type_traits>

template<typename T, typename Enable = void>
struct A;

// 정수형 타입에 대해 특수화
template<typename T>
struct A<T, std::enable_if_t<std::is_signed_v<T>>> {
    // signed type에 대한 구현
};

// 부호 없는 정수형 타입에 대해 특수화
template<typename T>
struct A<T, std::enable_if_t<!std::is_signed_v<T>>> {
    // unsigned type에 대한 구현
};

A<int> a1;       // int 타입에 대한 인스턴스화
A<unsigned> a2;  // unsigned 타입에 대한 인스턴스화
```

## Struct 멤버 확인 (Check Struct Member)
- SFINAE를 사용하여 구조체가 특정 데이터 멤버나 타입을 가지고 있는지 확인할 수 있다.

```cpp
#include <iostream>
#include <type_traits>

struct A {
    static int x;
    int y;
    using type = int;
};

struct B {};

// SFINAE를 사용한 멤버 변수 확인
template<typename T, typename = void>
struct has_x : std::false_type {};

template<typename T>
struct has_x<T, decltype((void) T::x)> : std::true_type {};

// SFINAE를 사용한 멤버 변수 확인
template<typename T, typename = void>
struct has_y : std::false_type {};

template<typename T>
struct has_y<T, decltype((void) std::declval<T>().y)> : std::true_type {};

// SFINAE를 사용한 멤버 타입 확인
template<typename...>
using void_t = void;

template<typename T, typename = void>
struct has_type : std::false_type {};

template<typename T>
struct has_type<T, void_t<typename T::type>> : std::true_type {};

// 스트림 연산자 지원 확인
template<typename T>
using EnableP = decltype(std::declval<std::ostream&>() << std::declval<T>());

template<typename T, typename = void>
struct is_stream_supported : std::false_type {};

template<typename T>
struct is_stream_supported<T, EnableP<T>> : std::true_type {};

int main() {
    std::cout << std::boolalpha;

    // 멤버 변수 'x' 확인
    std::cout << "has_x<A>::value: " << has_x<A>::value << std::endl; // true
    std::cout << "has_x<B>::value: " << has_x<B>::value << std::endl; // false

    // 멤버 변수 'y' 확인
    std::cout << "has_y<A>::value: " << has_y<A>::value << std::endl; // true
    std::cout << "has_y<B>::value: " << has_y<B>::value << std::endl; // false

    // 멤버 타입 확인
    std::cout << "has_type<A>::value: " << has_type<A>::value << std::endl; // true
    std::cout << "has_type<B>::value: " << has_type<B>::value << std::endl; // false

    // 스트림 연산자 지원 확인
    std::cout << "is_stream_supported<int>::value: " << is_stream_supported<int>::value << std::endl; // true
    std::cout << "is_stream_supported<A>::value: " << is_stream_supported<A>::value << std::endl; // false

    return 0;
}
```
