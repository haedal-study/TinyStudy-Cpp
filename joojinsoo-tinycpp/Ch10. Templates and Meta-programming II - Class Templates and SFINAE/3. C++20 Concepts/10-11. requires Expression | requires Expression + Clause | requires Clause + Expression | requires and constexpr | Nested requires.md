# C++20 Concepts 및 Requires

## 정의
- Concepts: C++20에서 도입된 개념으로, 템플릿 인자에 대한 제약 조건을 설정하여 템플릿 인자가 요구 조건을 충족하는지 컴파일 타임에 검사할 수 있다.
- Requires: SFINAE와 유사하게 컴파일 타임에 조건을 검사하며, 특정 조건을 만족하는 경우에만 템플릿 인스턴스를 허용한다.

```cpp
#include <iostream>
#include <type_traits>

// Arithmetic 개념 정의
template<typename T>
concept Arithmetic = std::is_arithmetic_v<T>;

// Arithmetic2 개념 정의
template<typename T>
concept Arithmetic2 = std::is_arithmetic_v<T> && sizeof(T) >= 4;

// 템플릿 인자 제약을 사용한 add 함수
template<Arithmetic T>
T add(T valueA, T valueB) {
    return valueA + valueB;
}

// requires 절을 사용한 add 함수
template<typename T>
T add(T valueA, T valueB) requires (sizeof(T) == 4) {
    return valueA + valueB;
}

// 개념과 requires 절을 함께 사용한 add 함수
template<Arithmetic2 T>
requires (sizeof(T) >= 4)
T add_with_concept_and_requires(T valueA, T valueB) {
    return valueA + valueB;
}

int main() {
    std::cout << add(3, 4) << std::endl; // ok, 출력: 7
    // std::cout << add(A{}, A{}) << std::endl; // 컴파일 오류: A는 Arithmetic 개념을 만족하지 않음

    std::cout << add_with_concept_and_requires(5, 6) << std::endl; // ok, 출력: 11
    // std::cout << add_with_concept_and_requires(5.0, 6.0) << std::endl; // 컴파일 오류: double은 sizeof(T) >= 4 조건을 만족하지 않음

    return 0;
}
```
