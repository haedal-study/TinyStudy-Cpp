# 구조체 초기화

## 구조체 초기화 - C++3
```cpp
struct S {
    unsigned x;
    unsigned y;
};
```

### 기본 초기화
- 초기화하지 않고 구조체 인스턴스를 선언한다.
```cpp
S s1; // x와 y는 초기화
```

### 빈 초기화
```cpp
S s2 = {}; // x와 y는 0으로 초기화
```

### 명시적 값 지정 초기화
```cpp
S s3 = {1, 2}; // x는 1, y는 2로 초기화
```

### 부분적 값 지정 초기화
```cpp
S s4 = {1}; // x는 1, y는 0기본값으로 초기화
```

### 생성자를 사용한 초기화 시도
```cpp
// S s5(3, 5); // 컴파일러 오류, 생성자를 찾을 수 없음
```

### 함수에서의 초기화
```cpp
S f() {
    S s6 = {1, 2}; // 명시적 초기화
    return s6;
}
```


## 구조체 초기화 - C++11

```cpp
struct S {
    unsigned x;
    unsigned y;
    void* ptr;
};
```

### 직접 리스트 초기화
```cpp
S s1{}; // 모든 멤버를 기본값으로 초기화 (x, y는 0, ptr은 nullptr)
S s2{1, 2}; // x=1, y=2로 초기화, ptr은 nullptr로 초기화
```

### 협소화 변환 오류
- C++11부터는 형변환에서 데이터 손실이 발생할 수 있는 초기화를 금한다.
```cpp
// S s3{1, -2}; // 컴파일 오류, 음수에서 unsigned로의 협소화 변환
```

### 함수에서 구조체 반환
```cpp
S f() { return {3, 2}; } // x=3, y=2로 초기화, ptr은 nullptr로 초기화
```


## 구조체 초기화 - C++20 지정 초기화
- 해당 기능을 사용하여 가독성 향상과 휴먼에러 방지를 꾀할 수 있다.
```cpp
struct A {
    int x, y, z;
};

A a1{1, 2, 3}; // 일반적인 초기화
A a2{.x = 1, .y = 2, .z = 3}; // 지정된 초기화 목록을 사용한 초기화
```


# 동적 메모리 초기화

## C++3
```cpp
// 초기화되지 않은 정수를 위한 메모리를 할당한다 
// 초기화되지 않았으므로 메모리에는 임의의 값이 저장된다
int* a1 = new int;

// 0으로 초기화된 정수를 위한 메모리를 할당한다
int* a2 = new int();

// 값이 4인 정수를 위한 메모리를 할당한다
int* a3 = new int(4);

// 초기화되지 않은 정수 4개를 저장할 수 있는 메모리를 할당한다
// 이 배열의 각 요소는 임의의 값으로 초기화된다
int* a4 = new int[4];

// 0으로 초기화된 정수 4개를 저장할 수 있는 메모리를 할당한다
int* a5 = new int[4]();
```

## C++11
```cpp
// C++11에서 0으로 초기화된 정수 4개를 저장할 수 있는 메모리를 할당한다
// 모든 요소를 0으로 초기화한다
int* b1 = new int[4]{};

// C++11에서 첫 번째와 두 번째 요소를 각각 1과 2로 초기화하고,
// 나머지 요소는 0으로 초기화하여 정수 4개를 저장할 수 있는 메모리를 할당한다
int* b2 = new int[4]{1, 2};
```
