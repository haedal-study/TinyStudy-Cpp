
### Lambda Expression
---

**람다 표현식** : 인라인 지역 범위 함수 객체(?). 람다는 표현식일 뿐이고, 런타임에 존재하지 않는다.
다음과 같이 표현한다.
`1. auto x = [capture clause] (parameter) {body}`
`2. auto x = [capture clause] (parameter)->return type {body}`

- capture clause : 람다 표현식임을 정의하고, 람다가 속한 지역 범위 내의 변수를 어떻게 사용할지(capture) 정의한다.
- parameter : 함수의 parameter와 같은 기능이다.
- body : 함수의 구현부와 같은 기능이다.

**클로져(closure)** : 람다 표현식의 런타임 결과로써 나오는 임시 객체이다.

1. 컴파일 시간에 람다는 고유한 클래스를 만들어내고,
2. 런타임에 그 클래스 타입의 객체(클로져)가 생성된다.
```cpp
auto f = [](int a, int b){return a > b;};
// 여기에서, f는 클로져가 아니고, 클로져의 복사된 값을 받는 변수이다.
```

```cpp
// 람다 예시
int array[] = {7,2,5,1};
auto lambda = [](int a, int b){return a > b;}; // 람다 표현식의 이름을 명시함(lambda)
std::sort(array, array+4, lambda);

std::sort(array, array+4, [](int a, int b){return a > b;}); // 이름을 명시하지 않음.
```


### Capture List
---
* 람다 표현식에서 사용할 외부 변수들을 값으로 가져오거나 방법과 참조로 가져올 수 있다.

1. `[]` 캡쳐하지 않음(외부 변수 가져오지 않음)
2. `[=]` 모든 변수를 값으로 캡쳐함 (const로 가져옴)
3. `[&]` 모든 변수를 참조로 캡쳐함
4. `[val]` 변수 val을 값으로 캡쳐함
5. `[&val]` 변수 val을 참조로 캡쳐함
6. `[=, &val]` 모든 변수를 값으로 캡쳐함. val만 참조로 캡쳐
7. `[val1, &val2]` 각 변수를 각 방식대로 캡쳐함

* 값으로 가져온 변수는 const 속성이 붙는다.
* 람다식은 `constexpr`키워드가 붙은 변수는 캡쳐하지 않고 읽을 수 있다.

```cpp
int val1 = 10;
constexpr char val2 = 'm';
string s = "hello";

// auto lambda = [=](int a) { val1 = a; }; // 컴파일 에러 : 값 수정 불가능
auto lambda = [&s]() {s[0] = val2; }; // val2 사용 가능

lambda();
cout << s; // print "mello"
```



참고자료
[씹어먹는 C++ 토막글 ② - 람다(lambda) 함수 (modoocode.com)](https://modoocode.com/196)
[[C++] 클로져(Closures)가 그래서 무엇인가요 – Lunchballer](https://lunchballer.com/archives/284)
