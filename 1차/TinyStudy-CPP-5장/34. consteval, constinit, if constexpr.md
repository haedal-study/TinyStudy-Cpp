
### `consteval` 키워드
---

* 함수가 컴파일 타임에 평가되도록 보장하는 키워드이다.
* 만약 함수가 컴파일 타임에 평가될 수 없을 경우 컴파일 에러가 발생한다.
* `constexpr`은 함수가 컴파일 타임에 평가될 수 없을 때는 런타임에 평가한다. (`consteval`이 더 강함.)
```cpp
consteval int square(int val) {
	return val * val;
}
square(4);
int v = 4;
// square(v); // 컴파일 에러
```

### `constinit` 키워드
---

* 컴파일 타임에 변수가 선언될 수 있도록 보장하는 키워드이다.
* 상수가 아닌 변수는 컴파일 에러가 발생한다.
* `constinit`으로 선언된 변수는 변경 가능하다.
* `constexpr`는 `const constinit`을 포함한다.
```cpp
constexpr int square(int val){
	return val * val;
}
constinit int v1 = square(4);
v1 = 3;
int a = 4;
// constinit int v2 = square(a); // 컴파일 에러
```


### `if constexpr`
---

* 조건문 분기를 컴파일 타임에 결정하도록 강제하는 구문이다.
* 컴파일 타임에 평가할 수 있는 변수를 사용해야 한다.

```cpp
auto f() {
	if constexpr (sizeof(void*) == 8) 
		return "hello"; // const char* 
	else return 3; // int, 컴파일되지 않음.
}
```

* 주의
	* `if constexpr`문은 꼭 `if/else` 문으로 맞춰줘야 한다.

	```cpp
	auto f1(){
		if constexpr (my_constexpr_fun() == 1)
		return 1;
		// return 2.0; // 컴파일 에러. else 문을 붙여야 함.
	}
	```

	* `else if`문도 `constexpr`를 붙어야 한다. -> `else if constexpr`