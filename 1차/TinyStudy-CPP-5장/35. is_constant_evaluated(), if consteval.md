
### std::is_constant_evaluated()
---

* 함수가 컴파일 타임에 평가되었는지 알기 위해 C++20에서는 `std::is_constant_evaluated()` 함수를 제공한다.
```cpp
#include <type_traits> // is_constant_evaluated() 사용을 위해 인클루드

constexpr int f(int n){
	if(std::is_constant_evaluated())
		return 0;
    return 4;
}

int x = f(3); // x = 0;
int v = 3;
int y = f(v); // y = 4;
```


### if consteval
---

* `std::is_constant_evaluated()` 사용 시 다음과 같은 오류가 발생하며, `if consteval` 조건문을 대신 사용함으로써 해결할 수 있다.

1. `constexpr` 함수 내에 인자로 **런타임** 파라미터를 넣은 `consteval` 함수를 넣으면 `std::is_constant_evaluated()`가 `true`이더라도 에러가 발생한다.
```cpp
consteval int g(int n) {return n * 3;}

constexpr int f(int n)
{
	if(std::is_constant_evaluated())  // if consteval을 사용할 경우 에러나지 않음
		return g(n);
	return 4;
}
// f(3) // 컴파일 에러
```

2. `if constexpr` 조건문 안에 쓴 `std::is_constant_evaluated()` 함수는 항상 `true`를 반환한다.
```cpp
constexpr int f(int x){
	if constexpr (std::is_constant_evaluated()) // if consteval을 사용하면 문제 없음
		return 3;
	return 4;
}
```
