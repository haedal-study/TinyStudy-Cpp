# 토큰 결합 연산자
토큰 결합 연산자는 매크로를 정의할 때 사용되는 연산자다. 두개의 토큰을 하나로 결합시킬 수 있다.
```
#include <stdio.h>

// 매크로 정의
#define FUNC_GEN_A(tokenA, tokenB) void tokenA##tokenB() { printf(#tokenA #tokenB " called\n"); }
#define FUNC_GEN_B(tokenA, tokenB) void tokenA##_##tokenB() { printf(#tokenA "_" #tokenB " called\n"); }

// 매크로 사용하여 함수 생성
FUNC_GEN_A(my, function)
FUNC_GEN_B(my, function)

int main() {
    myfunction();    // myfunction called
    my_function();   // my_function called
    return 0;
}
```
## 가변 매크로
C++11에서는 가변 매크로를 사용하여 가변 인자를 받는 매크로를 정의할 수 있다. __VA_ARGS__라는 식별자를 사용하여 전달된 인수를 참조한다.
```
#include <cstdio>

// 함수 정의
void f(int a) { printf("%d\n", a); }
void f(int a, int b) { printf("%d %d\n", a, b); }
void f(int a, int b, int c) { printf("%d %d %d\n", a, b, c); }

// 가변 매크로 정의
#define PRINT(...) f(__VA_ARGS__)

// 메인 함수
int main() {
    PRINT(1);        // 호출: f(1)
    PRINT(1, 2);     // 호출: f(1, 2)
    PRINT(1, 2, 3);  // 호출: f(1, 2, 3)
    return 0;
}
```
## 참고
중첩 매크로로 인자가 먼저 평가된 후에 그 결과를 다음 매크로로 넘길 수 있다.
```
#define TO_LITERAL_AUX(x) #x
#define TO_LITERAL(x) TO_LITERAL_AUX(x)

char y2[] = TO_LITERAL(__LINE__); // __LINE__을 먼저 정수로 평가 -> 평가된 정수를 문자열로 출력
```
또한 매크로를 사용하여 문자열 변환을 컴파일타임에 이루어지게 하여 성능 향상을 기대할 수 있다.