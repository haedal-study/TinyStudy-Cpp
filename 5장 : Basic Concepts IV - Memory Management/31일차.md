# [Reference]

## 참조
- 이미 존재하는 변수에 대한 다른 이름
- 기존 변수에 대한 별칭
- 변수와 변수 참조 모두 변수의 값을 참조하는 데 사용될 수 있음

포인터는 스택에 자체 메모리 주소와 크기를 가지고 있지만, 참조는 원래 변수와 동일한 메모리 주소를 공유함

~~~cpp
// 참조 문법: T& var = ...
//int& a; // 오류: 초기화되지 않음
//int& b = 3; // 오류: "3"은 변수가 아님

int c = 2;
int& d = c; // 참조. 유효한 초기화
int& e = d; // ok. 참조의 참조는 참조입니다
++d; // 증가
++e; // 증가
cout << c; // 4를 출력

int a = 3;
int* b = &a; // 포인터
int* c = &a; // 포인터
++b; // 포인터 'b'의 값 변경
++*c; // 'a'의 값 변경 (a = 4)

int& d = a; // 참조
++d; // 'a'의 값 변경 (a = 5)
~~~

## 참조의 안전성
- 참조는 NULL 값을 가질 수 없음
	- 언제나 참조가 유효한 저장소에 연결되어 있다고 가정할 수 있어야 함
- 참조는 변경될 수 없음
	- 한 번 참조가 객체에 대해 초기화되면 다른 객체를 가리키도록 변경할 수 없음   
	  (포인터는 언제든지 다른 객체를 가리킬 수 있음)
- 참조는 생성될 때 초기화되어야 함
	- 포인터는 언제든지 초기화될 수 잇음

위와 같은 특성으로 인해 참조는 포인터보다 안전함   
=> 프로그래밍 시 참조를 사용하는 것이 좋음

## 참조 - 함수 인수

- 포인터와 참조를 사용한 함수 인수
~~~cpp
void f(int* value) {} // value는 nullptr일 수 있음
void g(int& value) {} // value는 결코 nullptr이 아님

int a = 3;
f(&a); // ok
f(0); // 위험하지만 동작함!! (다른 숫자는 동작하지 않음)
//f(a); // 컴파일 오류 "a"는 포인터가 아님
g(a); // ok
//g(3); // 컴파일 오류 "3"은 참조가 아님
//g(&a); // 컴파일 오류 "&a"는 참조가 아님
~~~
포인터를 사용한 함수 f의 경우 &a를 전달하여 호출될 수 있으며, 0을 전달하여 호출되는 경우에도 동작하지만 위험함   
참조를 사용한 함수 g의 경우 a를 직접 전달하여 호출할 수 있음   
but 3 또는 &a를 전달하여 호출하면 컴파일 오류가 발생함    

- 참조는 고정 크기 배열을 나타내는 데 사용할 수 있음
~~~cpp
void f(int (&array)[3]) { // 크기가 3인 배열만 허용
    cout << sizeof(array);
}
void g(int array[]) {
    cout << sizeof(array); 
}

int A[3], B[4];
int* C = A;

f(A); // ok
// f(B); // 크기가 4이므로 컴파일 오류 발생
// f(C); // 포인터이므로 컴파일 오류 발생
g(A); // ok
g(B); // ok
g(C); // ok
~~~
함수 f는 크기가 3인 배열만 허용함   
=> 크기가 다른 배열을 전달할 경우 컴파일 오류가 발생함   
함수 g의 경우 배열이 포인터로 전달되므로 어떤 크기의 배열이든 상관없이 동작함   

## 참조 - 배열
~~~cpp
int A[4];
int (&B)[4] = A; // 배열에 대한 참조, 올바른 사용
int C[10][3];
int (&D)[10][3] = C; // 2차원 배열에 대한 참조, 올바른 사용

auto c = new int[3][4]; // 유형은 int (*)[4]
// "4개의 int 배열에 대한 포인터"로 해석됨
// int (&d)[3][4] = c; // 컴파일 오류
// int (*e)[3] = c; // 컴파일 오류
int (*f)[4] = c; // 올바른 사용

int array[4];
// &array는 크기가 4인 배열을 가리키는 포인터임
int size1 = (&array)[1] - array;
int size2 = *(&array + 1) - array;
cout << size1; // 4 출력
cout << size2; // 4 출력
~~~
