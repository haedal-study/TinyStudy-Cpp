# [std::is_constant_evaluated() | if consteval]

## std::is_constant_evaluated()
- 현재 함수가 컴파일 시간에 평가되는지 여부를 확인하는 유틸리티임
- 이 함수를 사용하여 함수가 컴파일 시간에 실행되는지 런타임에 실행되는지 여부를 확인할 수 있음

~~~cpp
#include <type_traits>

constexpr int f(int n) {
    if (std::is_constant_evaluated())
        return 0;
    return 4;
}

int x = f(3); // x = 0
int v = 3;
int y = f(v); // y = 4
~~~
f() 함수는 인자 n을 받고, 만약 현재 함수가 컴파일 시간에 평가되는 중이라면 0을 반환   
그렇지 않으면 4를 반환

즉, 이 함수를 호출할 때 'std::is_constant_evaluated()'를 사용하여 현재 함수가 컴파일 시간에 실행되는지를 확인함

첫번째 호출 f(3)에서는 상수 인자를 전달 -> 컴파일 시간에 평가 => 0반환

두번째 호출 f(v)에서는 변수 v를 전달 -> 런타임에 실행 => 4반환

## if consteval

- std::is_constant_evaluated()의 대체제로 작동
- 런타임 매개변수로 호출된 경우 constexpr함수 내에서 consteval함수를 호출할 수 있게 해줌
    ~~~cpp
    consteval int g(int n) { return n * 3; }

    constexpr int f(int n) {
    if consteval
        return g(n);
    return 4;
    }
    ~~~

- 항상 true로 평가되는 이러한 버그를 피할 수 있음

    ~~~cpp
    constexpr int f(int x) {
    if consteval
        return 3;
    return 4;
    }
    ~~~
