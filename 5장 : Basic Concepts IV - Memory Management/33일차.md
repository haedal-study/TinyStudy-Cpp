# [constexpr]

## constexpr 키워드
표현식이 컴파일 시간에 평가될 수 있음을 나타내는 지정자임

- const
  - 프로그램 실행 동안 변수의 값이 고정되어 있음을 보장함
- constexpr 
  - const를 의미함
  - 성능 및 메모리 사용량에 도움이 될 수 있음
  - 컴파일 시간에 영향을 미칠 수 있음

constexpr 변수는 항상 컴파일 시간에 평가됨
~~~cpp
const int v1 = 3;          // 컴파일 시간 평가
const int v2 = v1 * 2;     // 컴파일 시간 평가
int a = 3;                 // "a"는 동적입니다.
const int v3 = a;          // 런타임 평가!!
constexpr int c1 = v1;     // 허용됨
// constexpr int c2 = v3; // 컴파일 오류, "v3"는 동적입니다.
~~~

constexpr 함수는 모든 인수가 컴파일 시간에 평가될 때 함수가 컴파일 시간에 평가됨을 보장함
~~~cpp
constexpr int square(int value) {
    return value * value;
}
square(4);          // 컴파일 시간 평가
int a = 4;          // "a"는 동적입니다.
square(a);          // 런타임 평가
~~~

## constexpr 키워드의 제한 사항
- try-catch 블록, 예외처리, RTTI(Run-Time Type Information)와 같은 런타임 기능을 포함할 수 없음   
- goto 및 asm 문을 포함할 수 없음   
- 정적 변수를 포함할 수 없음
- C++14 이전에는 assert()를 포함할 수 없음
- C++20 이전에는 가상함수 일 수 없음
- reinterpret cast, union의 안전하지 않은 사용, 부호 있는 정수 오버플로우 등과 같은 정의되지 않은 동작 코드를 포함할 수 없음

** 주의 : 런타임 객체의 constexpr 비정적 멤버 함수를 사용할 수 없음   
but 정적 constexpr 멤버 함수는 특정 인스턴스에 의존하지 않음 -> 이 문제 발생 X   
=> 정적 constexpr 멤버 함수는 인스턴스에 상관없이 항상 constexpr로 사용 가능
