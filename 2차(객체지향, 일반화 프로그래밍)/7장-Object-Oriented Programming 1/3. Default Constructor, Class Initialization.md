
### Class Constructor
---
- **생성자(Coonstructor)** 는 클래스의 인스턴스가 생성될 때 가장 먼저 호출되는 멤버 함수이다.

- 목적
	- 데이터 맴버의 초기화
	- 자원 획득

- 특징
	- 생성자는 모든 데이터 맴버를 초기화해야 한다.
	- 다른 시그니처의 여러 생성자를 만들 수 있다.
	- 어떤 생성자든 `constexpr`가 될 수 있다.(기본 생성자는 `constexpr`이다.)


- **기본 생성자(Default Constructor)** 는 인자를 받지 않는 생성자이다. 모든 클래스는 명시적, 암시적이거나 삭제된 기본 생성자를 가지고 있다.
	- 암시적 : 클래스에 아무 생성자도 적지 않으면 있는 암시적 기본 생성자
	- 명시적 : 클래스에다 직접, `T()` 이렇게 적으면 명시적 기본 생성자
	- 삭제된 기본 생성자는...


#### 삭제된 기본 생성자(Deleted Default Constructor)

- 암시적 기본 생성자가 다음과 같은 이유로 삭제되는 것을 의미한다.

1. 사용자 지정 생성자가 있는 경우
2. 클래스에 비정적, 참조, `const`타입의 맴버가 있는 경우
3. 삭제된 기본 생성자를 가진 클래스를 비정적 맴버로 갖거나 부모로 두고 있는 경우.
```cpp
struct NoDefault { // deleted default constructor
	int& x;
	const int y;
};

struct A {
	NoDefault var; // deleted default constructor
};
struct B : NoDefault {}; // deleted default constructor


// NoDefault nd; // compile error: 기본 생성자를 참조할 수 없습니다. 삭제된 함수입니다.
// A a; // compile error: 마찬가지
// B b; // compile error: 마찬가지
```

4. 삭제 되었거나 접근 불가능한 소멸자를 비정적 맴버로 갖거나 부모로 두고 있는 경우.
```cpp
struct A {
private:
	~A() {}
};

struct B : A {};

// B b; // compile error: 기본 생성자를 참조할 수 없습니다. 삭제된 함수입니다.
```


### Class Initialization
---
- 초기화 리스트(Initializer List)는 생성자 몸체를 실행하기 전에 맴버를 초기화하거나 부모 클래스의 생성자를 명시적으로 호출할 때 쓰는 문법이다.
```cpp
struct A {
	int x, y;
	A(int _x, int _y) :x(_x), y(_y) {};
};

struct B : A {
	char c;
	B(char _c) :A(1, 2), c(_c)
	{
		cout << x << y << c;
	}
};

B b('A'); // print '12A'
```

- In-Class non-static data members initiialization(NSDMI) : C++11에서는 데이터 멤버 초기화를 멤버를 선언한 위치에서 할 수 있다.
	- 그리고 사용자 정의 생성자에서 in-class로 초기화된 맴버를 재정의 할 수 있다.
```cpp
struct A {
	int x = 0;
	const char* str = nullptr;
	A() {}
	A(const char* str1) : str{ str1 } {}
};

const char* str = "hello";
A a(str);
cout << a.str; // print "hello"
```

- const와 reference는 무조건 초기화 리스트나 in-class로 초기화해라.
```cpp
struct A {
	int x;
	const char y; // must be initialized
	int& z; // must be initialized
	int& v = x; // equal-initializer (C++11)
	const int w{ 4 }; // brace initializer (C++11)
	// A() {} // compile error: y, z에 대한 이니셜라이저를 제공하지 않음.
};
```

- 멤버의 초기화 순서(initialization order)는 초기화 리스트에 작성한 순서가 아니라 멤버의 선언 순서대로  초기화된다.
	- 이로 인해 발생할 수 있는 오류
```cpp
struct ArrayWrapper {
	int* array;
	int size;
	ArrayWrapper(int user_size) :
		size{ user_size }, array{ new int[size] } {}
};

ArrayWrapper a(10);
cout << a.array[4]; // seg fault
```


