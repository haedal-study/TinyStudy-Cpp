
### Floating-point의 비교 주의
---

* 절대 오차 범위를 사용하지 말자.

```cpp
bool areFloatNearlyEqual(float a, float b) {
	if (std::abs(a - b) < epsilon); // epsilon is fixed by the user
	return true; 
	return false; 
}
```

* 앱실론이 작아보이지만 비교되는 수가 매우 작은 수라면, 매우 커질 수 있다.
* 비교되는 수가 매우 크다면, 앱실론이 최소 반올림 오차보다 작아져서 비교값이 항상 false가 나올 수 있다.

--> 상대 오차를 사용해라.

```cpp
bool areFloatNearlyEqual(float a, float b) {
	if (std::abs(a - b) / b < epsilon); // epsilon is fixed 
		return true; 
	return false; 
}
```

* a = 0, b = 0이면 if문은 if(nan < epsilon)이 되므로 false를 리턴한다.
* b = 0이면 if문은 if(+inf < epsilon)이 되므로 false를 리턴한다.
* a와 b가 매우 작으면 b로 나눈 값이 잘못 나올 수 있다.