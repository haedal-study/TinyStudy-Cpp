
### Data and BSS Segment
---

* 메모리의 Data영역은 Data와 BSS로 나뉜다.
	* Data : 초기화된 데이터 영역으로, 초기화 된 전역변수나 static 변수를 저장한다. 세부적으로 읽기 전용 영역(Initialized Read-Only Area)와 읽기-쓰기 영역(Initialized Read-Write Area)로 나뉜다.
	
	* BSS : Block Started by Symbol의 약자로, 초기화되지 않은 전역변수, static 변수를 저장한다. 프로그램 실행 전에 커널에 의해 0으로 초기화된다.
* Data/BSS 세그먼트는 스텍 메모리(일반적으로 1GB)보다 크지만 느리다.

```cpp
int x = 10; // Data segment memory
int y;      // BSS segment memory

int main(){
	int a = 10; // stack memory
}
```


### Stack
---

* Stack & Heap 비교

|         | Stack                | Heap                                  |
| ------- | -------------------- | ------------------------------------- |
| 메모리 구성  | 연속적임(LIFO)           | 할당 내에 연속적임. 할당 간의 단편화 발생(가상머신에 따라 차이) |
| 최대 크기   | 리눅스(8MB), 윈도우(1MB)   | 메모리 시스템 전체                            |
| 메모리 초과시 | 함수 호출 시 프로그램 크래시     | 예외 or nullptr                         |
| 할당      | 컴파일타임                | 런타임                                   |
| 지역성     | 높음                   | 낮음                                    |
| 스레드 관점  | 각 스레드가 스텍 공간을 각각 차지함 | 스레드끼리 공유함                             |

* 지역 변수는 stack 메모리나 CU 레지스터에 저장된다.
* stack 영역에 저장되는 데이터 종류
	* 지역 변수
	* 함수 인자
	* 리턴 주소
	* 컴파일러 임시 값
	* 인터럽트 문맥들
* 스텍에 있는 객체는 그 범위 내에서만 유효하다.
```cpp
int* f(){
	int array[3] = {1,2,3};
	return array;
}
int* ptr = f();
cout << ptr[0];
```

참고자료 : [Memory Layout of C Programs - GeeksforGeeks](https://www.geeksforgeeks.org/memory-layout-of-c-program/)